(this["webpackJsonpsimple-login"]=this["webpackJsonpsimple-login"]||[]).push([[0],{159:function(e,t,n){},160:function(e,t,n){},189:function(e,t,n){"use strict";n.r(t);var o=n(9),a=n(0),c=n(22),s=n.n(c),i=(n(159),n(160),n(111)),r=n.n(i),l=n(134),u=n(73),p=n(10),j=n(206),d=n(207),g=n(204),h=n(209),m=n(205),b=n(55),O=n(135),f=n.n(O),x=n(136),v=n.n(x),w=function(e){var t=Object(p.f)(),n=Object(a.useState)(""),c=Object(u.a)(n,2),s=c[0],i=c[1],O=Object(a.useState)(""),x=Object(u.a)(O,2),w=x[0],S=x[1],y=Object(a.useState)(!1),T=Object(u.a)(y,2),I=T[0],C=T[1],_={username:"",password:"",grant_type:"password",client_id:"aris"},k=function(){var n=Object(l.a)(r.a.mark((function n(){var o,a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return C(!0),console.log("Device ID from URL:",e.location.search),(o=_).username=s,o.password=w,o.grant_type="password",o.client_id="aris",a={"Content-Type":"application/x-www-form-urlencoded"},n.next=10,f()({url:"http://acclab.ph:9090/auth/realms/D0808731-D59D-EA11-9C14-98541B2295E9/protocol/openid-connect/token",method:"POST",data:v.a.stringify(o),headers:a,responseType:"json"}).then((function(e){console.log(e),C(!1),window.localStorage.setItem("data",JSON.stringify(e));var n=e.data;localStorage.setItem("id_token",n.access_token),b.b.success("Login Success",{position:b.b.POSITION.BOTTOM_CENTER}),t.push("/welcome")})).catch((function(e){console.log(e.response),C(!1),b.b.error(e.response.data.error_description||"Error",{position:b.b.POSITION.BOTTOM_CENTER})}));case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(o.jsx)(j.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(o.jsxs)(j.a.Column,{style:{maxWidth:450},children:[Object(o.jsx)(d.a,{as:"h2",color:"teal",textAlign:"center",children:"Log-in to your account"}),Object(o.jsx)(g.a,{size:"large",onSubmit:k,children:Object(o.jsxs)(h.a,{children:[Object(o.jsx)(g.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username",value:s,onChange:function(e){return i(e.target.value)}}),Object(o.jsx)(g.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",value:w,onChange:function(e){return S(e.target.value)}}),Object(o.jsx)(m.a,{color:"teal",fluid:!0,size:"large",loading:I,disabled:I,children:"Login"})]})})]})})},S=n(203),y=n(75),T=n(139),I=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],s=Object(p.f)();null===window.localStorage.getItem("data")&&s.push("/simple-login");if(""===n){var i=localStorage.getItem("id_token");if(i){var r=Object(T.a)(i);console.log(r);try{c(r.displayName)}catch(l){s.push("/simple-login"),localStorage.removeItem("id_token")}}else s.push("/simple-login")}return Object(o.jsxs)(S.a,{text:!0,children:[Object(o.jsx)(d.a,{as:"h1",content:"Hi "+n+", Welcome!",style:{fontSize:"4em",fontWeight:"normal",marginBottom:0,marginTop:"3em"}}),Object(o.jsx)(d.a,{as:"h2",content:"",style:{fontSize:"1.7em",fontWeight:"normal",marginTop:"1.5em"}}),Object(o.jsxs)(m.a,{primary:!0,size:"huge",onClick:function(){localStorage.clear(),s.push("/simple-login")},children:["Logout",Object(o.jsx)(y.a,{name:"right arrow"})]})]})},C=(n(187),n(80));var _=function(){return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(C.a,{children:Object(o.jsxs)(p.c,{children:[Object(o.jsx)(p.a,{exact:!0,path:"/",component:w}),Object(o.jsx)(p.a,{exact:!0,path:"/simple-login",component:w}),Object(o.jsx)(p.a,{exact:!0,path:"/welcome",component:I})]})}),Object(o.jsx)(b.a,{})]})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,210)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),o(e),a(e),c(e),s(e)}))};n(188);s.a.render(Object(o.jsx)(_,{}),document.getElementById("root")),k()}},[[189,1,2]]]);
//# sourceMappingURL=main.2ff13109.chunk.js.map